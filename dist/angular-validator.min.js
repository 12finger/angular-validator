angular.module("angularValidator",[]),angular.module("angularValidator").directive("angularValidator",["$injector",function(a){return{restrict:"A",link:function(b,c,d,e){function f(b){return b&&"invalid-message"in b.attributes?a.get(b.attributes["invalid-message"].value):!1}function g(a){for(var b=f(a),c=0;c<a.length;c++)c in a&&h(a[c],b)}function h(a,c){a.isWatchedByValidator||(a.isWatchedByValidator=!0,"validate-on"in a.attributes&&"blur"===a.attributes["validate-on"].value&&angular.element(a).on("blur",function(){l(a,c),o(a)}),b.$watch(function(){return a.value+a.required+r.submitted+k(a)+i(r[a.name])+j(r[a.name])},function(){if(r.submitted)l(a,c),o(a);else{var b="validate-on"in a.attributes&&"dirty"===a.attributes["validate-on"].value;b?(l(a,c),o(a)):r[a.name]&&r[a.name].$pristine&&(l(a,c),o(a))}}))}function i(a){return a&&"$dirty"in a?a.$dirty:void 0}function j(a){return a&&"$valid"in a?a.$valid:void 0}function k(a){if("validator"in a.attributes){var c=b.$eval(a.attributes.validator.value);return r[a.name].$setValidity("angularValidator",c),c}}function l(a,c){var d=function(){return"<i class='fa fa-times'></i> Required"},e=function(){return"<i class='fa fa-times'></i> Invalid"};if(a.name in r){var f=r[a.name],g=n(a);g&&g.remove(),(f.$dirty||b[a.form.name]&&b[a.form.name].submitted)&&(f.$error.required?"required-message"in a.attributes?angular.element(a).after(m(a.attributes["required-message"].value)):angular.element(a).after(m(d)):f.$valid||("invalid-message"in a.attributes?angular.element(a).after(m(a.attributes["invalid-message"].value)):c?angular.element(a).after(m(c.message(f,a))):angular.element(a).after(m(e))))}}function m(a){return"<label class='control-label has-error validationMessage'>"+b.$eval(a)+"</label>"}function n(a){for(var b=angular.element(a).parent().children(),c=0;c<b.length;c++)if(angular.element(b[c]).hasClass("validationMessage"))return angular.element(b[c]);return!1}function o(a){if(a.name in r){var c=r[a.name];angular.element(a).removeClass("has-error"),angular.element(a.parentNode).removeClass("has-error"),(c.$dirty||b[a.form.name]&&b[a.form.name].submitted)&&c.$invalid&&(angular.element(a.parentNode).addClass("has-error"),angular.element(a).addClass("has-error"))}}var p=angular.element(c)[0],q=p.attributes.name.value,r=b[q];r.submitted=!1,b.$watch(function(){return p.length},function(){g(p)}),c.on("submit",function(a){a.preventDefault(),b.$apply(function(){r.submitted=!0}),r.$valid&&b.$apply(function(){b.$eval(p.attributes["angular-validator-submit"].value)})}),r.reset=function(){for(var a=0;a<p.length;a++)p[a].name&&(r[p[a].name].$setViewValue(""),r[p[a].name].$render());r.submitted=!1,r.$setPristine()},g(p)}}}]);